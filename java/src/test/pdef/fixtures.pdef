package com.ivankorobkov.pdef.fixtures;

enum ObjectType {
    OBJECT,
    USER;
}

message Id {
    options [type_field: "type", format: "line"];

    type ObjectType [value: "ObjectType.OBJECT"];
}

message UserId extends Id {
    options [format: "line"];

    type        ObjectType [value: "ObjectType.USER"];
    value       int64;
}

message User {
    id          UserId;
    name        string;
    age         int32;
    sex         Sex;
    profile     Profile;
    floats      Map<string, float>;
}

message Profile {
    firstName   string;
    lastName    string;
    birthday    Birthday;
    avatar      int64;
    wallpaper   int64;

    preferedLanguage Language;

	telephone   string;
	info        string;

    complete    bool;
}

enum Sex {
    MALE,
    FEMALE;
}

enum Language {
    EN, RU, FR, DE;
}

message Birthday {
    options [format: "line"];

    year    int32;
    month   int32;
    day     int32;
}

message Weighted<E, W> {
    element E;
    weight  W;
}

message WeightedSet<E, W> {
    elements Set<Weighted<E, W>>;
}

message TimeSet<E> extends WeightedSet<E, int64> {
}

message Chat {
    messages TimeSet<Birthday>;
}
